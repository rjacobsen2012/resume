import{_ as j}from"./AppLayout-DgUK4KnZ.js";import{s as B,d as r,p as L,B as V,S as m,o as f,c as g,w as o,b as s,f as c,a as n,h as A,O as i,a2 as S}from"./app-PHXSfIzS.js";import{_ as d}from"./CustomButton-CiERMIHg.js";import"./ThemeSwitchButton-DM7kCwpu.js";const E={class:"py-12"},I={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},O={class:"bg-gray-400 dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg"},U={class:"flex items-center justify-end gap-2"},Y={__name:"Index",props:{status:{type:String,default:null}},setup(q){const h="https://user-resume.test";B(()=>{y()});const u=r(!0),v=r(0),b=L({current_page:1,pagesize:10,sort_column:"id",sort_direction:"asc"}),p=r(null),y=async()=>{try{u.value=!0;const t=await(await fetch(`${h}/roles?${new URLSearchParams(b)}`)).json();p.value=t==null?void 0:t.data,v.value=t==null?void 0:t.recordsTotal}catch{}u.value=!1},w=()=>{i.get(route("role.create"))},x=e=>{i.get(route("role.edit",[e]))},C=V(),_=r(null),k=()=>{axios.delete(route("role.destroy",[_.value])).then(e=>{R(e.data.status),i.get(route("role.index"))})},R=e=>{S.useToast().success(e)},$=e=>{_.value=e,C.require({message:"Are you sure you want to delete the role?",header:"Remove Role",icon:"icon-delete",rejectLabel:"No",rejectClass:"btn-success",acceptLabel:"Yes",acceptClass:"btn-danger",accept:k})},N=[{name:"Roles",active:!0}];return(e,t)=>{const a=m("Column"),T=m("DataTable");return f(),g(j,{title:"Roles",links:N},{"right-links":o(()=>[s(d,{type:"button",class:"btn-success",onClick:w},{default:o(()=>[c(" Add Role ")]),_:1})]),default:o(()=>[n("div",E,[n("div",I,[n("div",O,[s(T,{value:p.value,stripedRows:"",paginator:"",rows:10,"rows-per-page-options":[10,20,50],"responsive-layout":"stack"},{default:o(()=>[s(a,{field:"id",sortable:"",header:"Id"}),s(a,{field:"name",sortable:"",header:"Name"}),s(a,{field:"guard_name",sortable:"",header:"Guard"}),s(a,{field:"created_at",sortable:"",header:"Created"}),s(a,{field:"role_id"},{body:o(({data:l})=>[n("div",U,[s(d,{type:"button",class:"btn-primary",onClick:D=>x(l.id)},{default:o(()=>[c("Edit")]),_:2},1032,["onClick"]),l.has_users?A("",!0):(f(),g(d,{key:0,type:"button",class:"btn-danger",onClick:D=>$(l.id)},{default:o(()=>[c("Delete")]),_:2},1032,["onClick"]))])]),_:1})]),_:1},8,["value"])])])])]),_:1})}}};export{Y as default};
